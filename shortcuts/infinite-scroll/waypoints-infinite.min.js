(function(){var $,defaults;$=window.jQuery;defaults={container:"auto",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:$.noop,onAfterPageLoad:$.noop};$.waypoints("extendFn","infinite",function(options){var $container;options=$.extend({},$.fn.waypoint.defaults,defaults,options);$container=options.container==="auto"?this:$(options.container);options.handler=function(direction){var $this;if(direction==="down"||direction==="right"){$this=$(this);options.onBeforePageLoad();$this.waypoint("disable");$container.addClass(options.loadingClass);return $.get($(options.more).attr("href"),function(data){var $data,$more,$newMore;$data=$(data);$more=$(options.more);$newMore=$data.find(options.more);$container.append($data.find(options.items));$container.removeClass(options.loadingClass);if($newMore.length){$more.replaceWith($newMore);$this.waypoint("enable")}else{$this.waypoint("destroy")}return options.onAfterPageLoad()})}};return this.waypoint(options)})}).call(this);